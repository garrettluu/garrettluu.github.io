<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="styles/main.css">

    <meta charset="UTF-8">
    <title>
        Hello World
    </title>
</head>
<body>
    <div id="main">
    <div id="header">
        <h1 id="title">
            GARRETT LUU
            <div id="fancyrectangle">
            </div>
        </h1>
    </div>

    <ul class="nav">
        <li><a  href="index.html" id="navblog" class="active" >Blog</a></li>
        <li><a  href="about.html" id="navabout">About Me</a></li>
        <li><a  href="projects.html" id="navprojects">Projects</a></li>
    </ul>

    <div id="blog" class="m-scene">
        <div class="entry scene-element scene-element--fade">
            <h2>
                Thoughts on Kotlin
            </h2>
            <h3>
                2018.6.29
            </h3>
            <figure>
                <img src="styles/images/entry5.png" class="img"  width="670px" height="auto">
            </figure>
            <p>
                Until Google announced official support for Kotlin back in Google I/O 2017, I never had real experience
                with the language beyond skimming through some documentation and "Hello World." It seemed like an interesting
                language, but I've just never used it enough to really say that I love it or hate it. With Google's
                announcement, I jumped at the chance to try it out for a full-scale project of making an Android app to
                be released on the Play Store. I've done some basic Android stuff in the past, but never on a scale like
                this, so I thought it would be fun to put some of the things I've learned into an actual project. It's
                definitely a daunting task, and I've been working on it on-and-off this past year with somewhat decent
                progress. Obviously, it's still no where near being done though!
            </p>
            <p>
                Now that I had some time to work with the language, and I've begun to understand its strengths, weaknesses,
                and quirks, I think I have a pretty good grasp of Kotlin in general. There are still things that I'm discovering
                every day that make me say "wow that's convenient" or "that's a weird way of doing it." Here are some of
                my thoughts about some of the features and oddities of Kotlin.
            </p>
            <p>
                Kotlin does for Java what Swift did for Objective C, as I like to see it. It tries to make things easier,
                more intuitive, and more convenient to use, while maintaining interoperability with Java so that you
                can easily integrate it into your projects. The syntax has some key differences, but the structure is still
                the same as Java (or any other OOPL, for that matter), with classes, methods, variables, etc. One of the
                key differences is the lack of semicolons at the end of lines, which makes me relieved to see, but I still
                find myself instinctively typing them in from muscle memory, even after nearly a year with the language.
                Variables are another key difference; for most cases, you can just use "var," and Kotlin will automatically
                determine what type of variable it is. You can also declare variables without initializing them, but you need
                the "lateinit" modifier for that, which I find rather unnecessary and annoying.
            </p>
            <p>
                Switch-statements are now "when" statements, and have a slightly more simple syntax than before. I prefer
                this over the switch-statements of Java, which seem odd compared to the rest of the language with all the
                "case" and "break." If-statements still work as before, but now they also replace ternary operators and
                thus can return values. If for some reason you like making really complicated ternary statements that are
                entirely unreadable, Kotlin makes them a little easier for other people to understand. So some garbage like this
            </p>
            <code>
                out = usesCeiling ? (out > 0.8) ? 0.8 : ((out < -0.8) ? -.8 : out) : out; // (ಥ﹏ಥ) (ʘᗩʘ')
            </code>
            <p>
                becomes
            </p>
            <code>
                out = if (usesCeiling) if ((out > 0.8)) 0.8 else (if ((out < -0.8)) -.8 else out) else out
            </code>
            <p>
                Still somewhat hard to decipher, but less obtuse than the Java example.
            </p>
            <p>
                The last thing I want to discuss is static methods, which is my least favorite part about Kotlin.
                In Java, static methods and variables are as easy as adding the "static" keyword in the variable declaration.
                With Kotlin, you have to declare a "companion object" and put all of your static variables and methods
                inside of that companion object. This just adds an unnecessary layer of complexity to the language. Innovation
                for innovation's sake isn't good, and I would've been more than satisfied with having kept the static keyword
                from Java.
            </p>
            <p>
                Kotlin as a whole, however, is a breath of fresh air for Java, and I'm very glad it exists. I think that many of its
                features are convenient and great, with some minor oddities that I would like to see gone. For Android
                development, I have (for the most part) switched over to Kotlin. The change was easy to make, and being able
                to continue using old Java code alongside Kotlin is another bonus. Java will still have a place, but I see
                Kotlin as a suitable replacement.
            </p>
        </div>
        <div class="entry scene-element scene-element--fade">
            <h2>
                Arcs and Splines - FRC Motion Profiling Part 1
            </h2>
            <h3>
                2018.6.22
            </h3>
            <p>
                I updated some stuff on the site, but I want to talk about some non-web stuff today. I've been involved
                with FRC (FIRST Robotics Competition) for 4 years now, and I've done software for the last 2 years on my
                team (4322). This year, despite our limited resources, we were able to develop motion profiling during
                the build season, allowing for smooth driving during the Autonomous period of the game.
            </p>
            <p>
                The concept of motion profiling is simple. Rather than the oscillating nature of a PID loop, we instead
                smoothly ramp up in velocity, cruise at a constant speed, then ramp back down smoothly to a stop. If we
                graphed out the velocity of the robot over time, we see a trapezoidal shape, which is why it's usually
                referred to as a trapezoidal motion profile.
            </p>
            <figure>
                <img src="styles/images/entry4.0.png" class="img"  width="200px" height="auto">
                <figcaption>A Trapezoidal Motion Profile</figcaption>
            </figure>
            <p>
                Applying this in the straight-line case is simple. We simply generate the velocity and position values at every interval
                (e.g. every tenth of a second) and stream them to our motion controllers.  With feedback from encoders, we can use a PID loop with
                feed forward to maintain our velocity. It does the job well, even with minimal tuning.
                The TalonSRX, which most teams
                (including mine) use, has built-in support for motion profiling, so just follow their examples that they
                provided and adapt it for your team's use case.
            </p>
            <p>
                The fun comes when we apply this to the 2-D case, and suddenly many more questions arise. Specifically, what
                type of path/curve do we take to get to our location? How do we generate the points along the path?
                How do we get our robot to follow that path?
            </p>
            <p>
                To start, we should consider what type of path our robot should follow. There are many types of curves and
                splines possible, such as polynomials, arcs, or even sine waves, but I think that the three most relevant
                are biarcs, cubic splines, and quintic splines. Biarcs are the simplest, and cubic and quintic splines are more complex
                but can produce smoother results. For the purposes of FRC, it really doesn't matter which one you use for
                99% of cases as long as you keep the numbers reasonable.
            </p>
            <p>
                Biarcs are the simplest for the robot to follow because it only involves one major speed change. They are made
                up of two arcs, which are pieces of circles, meaning that the robot can move at a constant speed after it ramps up
                due to the constant curvature. All you need to do is calculate the radius of each arc from the start and end angle, and
                use that number to determine your left and right wheel velocities. The only downside is the point between two arcs, where
                the robot needs to make a sudden instantaneous speed change, which can result in some jerkiness and slight
                oscillations.
            </p>
            <figure>
                <img src="styles/images/entry4.1.png" class="img"  width="250px" height="auto">
                <figcaption>Biarc Interpolation</figcaption>
            </figure>
            <p>
                Splines, on the other hand, are easy to calculate and relatively easy to follow. In the case of quintic
                splines, we also get a benefit of smooth curvature, which results in minimal jerking but can result in
                weird paths due to the constraints. To calculate the spline, we need three numbers: the straight
                distance from your beginning and end, the starting angle, and the ending angle, both relative to the
                straight line formed from beginning to end. We'll call those <b>D</b>, <b>&theta;<sub>1</sub></b>, and <b>&theta;
                <sub>2</sub></b>, respectively. To keep things simple, we'll put the start and end points on the x-axis.
                We just need to start with a general equation h(x) = ax<sup>3</sup> +
                bx<sup>2</sup> + cx + d, then apply constraints: h(0) = 0, h(D) = 0, h'(0) = tan(&theta;<sub>1</sub>),
                h'(D) = tan(&theta;<sub>2</sub>). At this point, it becomes a system of equations, and can be solved using
                substitution or elimination, whichever you prefer. The quintic case is the same, only you'll set the second
                derivative to 0 at the beginning and end.
                I highly encourage you to take a look at this interactive
                demo I've created <a href="https://www.desmos.com/calculator/4d2pcluehp">here</a> if you want a visual.
            </p>

            <figure>
                <img src="styles/images/entry4.2.png" class="img"  width="250px" height="auto">
                <figcaption>Spline Interpolation</figcaption>
            </figure>
            <p>
                Now that we have the paths we are going to use, what do we do with them? The next step is to create a
                <b>trajectory</b>, which means we are calculating our velocity and position at regular intervals along
                the curve. Generating these numbers will be covered in the next entry.
            </p>
        </div>
        <div class="entry scene-element scene-element--fade">
            <h2>
                jQuery Fun and Newly Unearthed Bugs (Web Development - Day 3)
            </h2>
            <h3>
                2018.6.20
            </h3>
            <p>
                Today was rather uneventful, but I made some major changes to how the animations between pages are handled.
                Gone is the cumbersome and overdesigned "game of catch," and now we have proper smooth transitions between
                pages using jQuery and smoothState.js. Page loads are completely invisible, providing a more seamless
                experience in navigating the site. smoothState.js is nice in that it allows for animations to be easily
                called whenever you want them to be called, such as when you click the link or when the page finishes
                loading. This means that you don't need to put eventlisteners everywhere to check when animations have
                finished, and also allows for better timing of animations.
            </p>
            <p>
                The animations actually took longer than I initially thought to set up. After some fiddling, reading through
                what turned out to be deprecated examples, I got the page loading to be invisible, but the fade-out animation
                wasn't quite working. The fade-out was part of the .is-exiting class, which reverses the animation whatever
                you assigned it to. Turns out that the example used .m-scene.is-exiting, when .is-exiting is what actually
                worked. I just love it when people write things and provide inaccurate examples to supplement them.
            </p>
            <p>
                jQuery is also going to allow me to do more interesting things. Currently, each image that has the click-
                to-zoom feature has its own JavaScript, which is going to get impractical as more and more images
                are added to the site. With jQuery, I can get elements from the page based on className rather than id,
                which will allow me to apply scripts to multiple elements of a class at the same time rather than having
                to individually copy code for each one.
            </p>
            <p>
                    Finally, it seems I've found some new bugs that I wasn't aware of before. The click-to-zoom feature
                    causes the images to slip under the text of older blog posts. Images from older blog posts are fine
                    if there's a newer post under it, but look like this when over older posts.
            </p>
            <figure>
                <img class="img" src="styles/images/entry3.png" id="img3" width="500px" height="auto">
                <figcaption>I Fixed This Bug Already</figcaption>
            </figure>
            <p>
                My hypothesis on this is that the older images have the same z-index (which I tried changing to 10, but that
                didn't work), and since the older entries occur later on the html file, they end up being "layered" on
                top and take priority over the newer entries.
            </p>
            <p>
                However, as I was writing this, I decided to try some possible solutions. Putting the div for the zoomed image outside
                of the div for each blog entry turned out to be the correct way. We can now set the z-index of the zoomed
                image and the blog entries separately, so the zoomed images will always be on top.
                Who knew solutions could be so simple?
            </p>


        </div>
        <div class="entry scene-element scene-element--fade">
            <h2>
                A Game of Catch (Web Development - Day 2)
            </h2>
            <h3>
                2018.6.19
            </h3>
            <p>
                Testing out animations in JavaScript, and modified some parts of the site. You'll notice now that images
                have a click-to-zoom function, with some nice fade-in and fade-out animations to go along with it. I also
                experimented with a new way of handling navigation between pages. The site is now technically on one page,
                with fade transitions if you click on About and Blog (Projects is still not using this system). I came up
                with a clever, albeit inefficient way of handling this navigation and animations. Again, there's probably
                better ways to do this, but this is my solution for now.
            </p>
            <figure>
                <img class="img" src="styles/images/entry2.png" id="img2" width="372px" height="auto">
                <figcaption>Really Ugly Code I'm Sorry</figcaption>
            </figure>
            <p>
                When you click on one of the buttons, the animation for the current block of text starts, and creates a
                new blogeventlistener that waits for the end of the animation. When the animation ends, the next animation
                is started up, and an abouteventlistener is created. Now, were are on the other page, so going back to
                the original involves creating an abouteventlistener, which causes the blogeventlistener to also start up.
                I like to visualize this as a ball being thrown back and forth between the two eventlisteners (the ball
                in this case can be the nav variable, which changes depending on which option is selected).
            </p>
            <p>
                This game of catch is easy to replicate for two buttons, but becomes more difficult if we try
                to involve another player in the form of a third button. Another downside is that if you click the buttons
                too fast, the page will become stuck, and you'll need to refresh the page for the animations to work again.
                I'll try to find an easier, less insane way of implementing these fade animations in the future. More
                updates and fixes are coming soon.
            </p>

        </div>
        <div class="entry scene-element scene-element--fade">
            <h2>
                Web Development - Day 1
            </h2>
            <h3>
                2018.6.18
            </h3>
            <p>
                First blog entry! This website is my personal project as I attempt to learn web development. HTML was easy enough, CSS is
                awkward, and JavaScript doesn't really make sense yet. Obviously, I still have many things to learn in
                this process, and will need to break some habits I established with Java, C, and all those other OOP
                languages. I have done some JS in the past using JQueryUI, but none of that really applies to this site
                yet. Hopefully, I could keep this site simple, running only HTML and CSS as it is right now.
            </p>
            <p>
                My main problem with CSS is aligning elements with each other. Android XML has a convenient solution with
                LinearLayouts and ways to adjust spacing, as well as RelativeLayout to align elements relative to each
                other. In the image below, the whole space is a vertical LinearLayout, and each element in the list is
                a horizontal LinearLayout with the icon and text. While this is most likely not the most efficient method,
                it is incredibly easy to visualize and design our app layout around this principle of nested LinearLayouts.
            </p>
            <figure>
                <img class="img" src="styles/images/entry1.png" id="img1" width="310px" height="auto">
                <figcaption>Example of Linear Layouts</figcaption>
            </figure>
            <p>
                CSS doesn't seem to have an equivalent, and I don't want to resort to using tables and other junk
                instead of properly learning the conventions. Columns were the obvious solution at first, but can't have
                different lengths from each other unless I use various third-party frameworks. I'll just have to make do
                until I find a better solution, or find some framework that has similar functionality to LinearLayouts
                from Android.
            </p>
            <p>
                Web development isn't as hard as I thought it would be, but there is still a learning curve and surprises
                along the way. Hopefully I can improve my skills and learn more things along the way, and I'm excited to
                see where this journey takes me.
            </p>

        </div>
        <div class="img-zoom">
            <img class="zoom-content">
        </div>
    </div>

    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="scripts/jquery.smoothState.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html>